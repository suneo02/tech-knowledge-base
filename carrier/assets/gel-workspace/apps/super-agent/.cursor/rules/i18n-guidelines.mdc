---
globs: *.ts,*.tsx
description: 国际化与字符串管理规范（STRINGS + t）
---

# i18n 指南（强制）

在所有 `*.ts`/`*.tsx` 组件与页面中，必须使用本地 `STRINGS` 常量配合 `t` 函数集中管理用户可见文案，禁止在 JSX 中直接硬编码字符串。

## 基本用法

```ts
// t 签名建议保持：t(key: string, fallback: string): string
// 允许临时使用空 key：t('', 'Dashboard')，但应尽快补齐 key
import { useMemo } from 'react'

const STRINGS = {
  TITLE: t('dashboard.title', 'Dashboard'),
  // 示例：允许临时占位
  // SUBTITLE: t('', 'Welcome to the dashboard'),
} as const
```

在 JSX 中引用：

```tsx
<h1>{STRINGS.TITLE}</h1>
```

传入子组件 props：

```tsx
<PageHeader title={STRINGS.TITLE} />
```

## 约束与约定

- 必须：所有用户可见文本通过 `STRINGS` + `t` 管理。
- 必须：`STRINGS` 定义紧随 import 之后，位于文件顶部，`as const` 收窄类型。
- 必须：`STRINGS` 的键名使用大写下划线（UPPER_SNAKE_CASE），如 `TITLE`、`EMPTY_TEXT`。
- 建议：`t` 的第一个参数为语义化 key（如 `dashboard.title`）；如暂无资源，可先传空字符串并保留合理 fallback。
- 建议：列表/按钮/空态/表单校验等通用文案优先复用所在模块既有条目，避免重复 key。
- 禁止：在 JSX 或逻辑中直接硬编码用户可见文本（含 Button 文案、空态描述、消息提示等）。

## 常见场景示例

按钮与空态：

```tsx
const STRINGS = {
  ADD: t('common.add', 'Add'),
  EMPTY: t('table.empty', 'No Data'),
} as const

<Button>{STRINGS.ADD}</Button>
<Empty description={STRINGS.EMPTY} />
```

表格列头：

```ts
const STRINGS = {
  COL_NAME: t('user.name', 'Name'),
  COL_EMAIL: t('user.email', 'Email'),
} as const

const columns = [
  { title: STRINGS.COL_NAME, dataIndex: 'name' },
  { title: STRINGS.COL_EMAIL, dataIndex: 'email' },
]
```

## `t` 的来源

- 若项目已存在 i18n 模块，直接按现有导入使用（如 `import { t } from '@/i18n'`）。
- 若不存在，请在公共工具层提供 `t(key: string, fallback: string): string`，并统一从此处导入。

## 代码评审检查点（Reviewer Checklist）

- 是否存在任何硬编码用户可见文本？
- 是否所有文本都通过 `STRINGS` + `t`？
- `STRINGS` 是否放置于文件顶部且带 `as const`？
- key 是否语义清晰、可复用？
