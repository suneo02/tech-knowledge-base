# 通用返回数据格式

本文档描述了系统中使用的通用 API 响应格式。

## 一、基础响应结构 `ApiResponseForSuperlist`

适用于不带分页的一般性数据返回，格式如下：

```typescript
export type ApiResponseForSuperlist<T = never> = ApiResponseForWFC<T>

// 基础结构
{
  ErrorCode: number | string // 状态码，0表示成功
  ErrorMessage: string // 状态码对应的错误信息
  Data: T // 实际数据，泛型T可以是任意类型
}
```

**使用场景**：适用于单个对象或不需要分页的数据集合的返回

**示例**：

```json
{
  "ErrorCode": 0,
  "ErrorMessage": "操作成功",
  "Data": {
    "id": 1001,
    "name": "测试企业",
    "status": "active"
  }
}
```

## 二、分页响应结构 `ApiResponseForSuperlistWithPage`

适用于带分页的数据列表返回，格式如下：

```typescript
export type ApiResponseForSuperlistWithPage<T = never> = ApiResponseForSuperlist<{
  list: T[];                 // 数据列表
  page: ApiPageForSuperlist  // 分页信息
}>

// 分页信息结构
export type ApiPageForSuperlist = {
  pageNo: number;            // 当前页码
  pageSize: number;          // 每页大小
  total: number;             // 总记录数
}

// 完整结构
{
  ErrorCode: number | string // 状态码，0表示成功
  ErrorMessage: string       // 状态码对应的错误信息
  Data: {
    list: T[];               // 数据列表
    page: {
      pageNo: number;        // 当前页码
      pageSize: number;      // 每页大小
      total: number;         // 总记录数
    }
  }
}
```

**使用场景**：适用于需要分页显示的列表数据查询

**示例**：

```json
{
  "ErrorCode": 0,
  "ErrorMessage": "操作成功",
  "Data": {
    "list": [
      { "id": 1, "name": "企业A", "type": "科技" },
      { "id": 2, "name": "企业B", "type": "金融" }
    ],
    "page": {
      "pageNo": 1,
      "pageSize": 10,
      "total": 42
    }
  }
}
```

## 三、聊天响应结构 `ApiResponseForChat`

适用于聊天相关 API 的返回格式，结构如下：

```typescript
export type ApiResponseForChat<T = never> = {
  result: T // 结果数据
  message: string // 消息提示
  Data?: T // 兼容旧版数据格式
  status: string // 状态
  gelData?: {
    // 卡片数据数组
    type: GelCardTypeEnum // 卡片类型
    total: number // 总数
    data: any[] // 卡片具体数据
    params: {
      // 参数信息
      companyCode: string
      companyName: string
      [key: string]: any // 其他可能的参数
    }
  }[]
  ErrorCode?: number | string // 兼容旧版错误码
}
```

**使用场景**：适用于聊天相关 API 的数据返回，特别是包含卡片展示的场景

**示例**：

```json
{
  "result": { "queryId": "q123456" },
  "message": "查询成功",
  "status": "success",
  "gelData": [
    {
      "type": "company",
      "total": 1,
      "data": [{ "name": "示例公司", "regCapital": "1000万", "estDate": "2020-01-01" }],
      "params": {
        "companyCode": "91110105MA01ABCD9X",
        "companyName": "示例公司"
      }
    }
  ],
  "ErrorCode": 0
}
```

## 四、卡片类型枚举 `GelCardTypeEnum`

卡片类型枚举定义了系统支持的所有卡片类型：

```typescript
export enum GelCardTypeEnum {
  // ===== 关系类卡片 =====
  // 查关系
  AgentGetrelationpath = 'AgentGetrelationpath',
  // 多对一触达
  AgentGetrelationpathmulti = 'AgentGetrelationpathmulti',

  // ===== 图表类卡片 =====
  // 关联方
  ChartCorrelationParty = 'ChartCorrelationParty',
  ChartCorrelationParty2 = 'chart_glf',
  // 股权穿透图
  ChartEquityPenetration = 'ChartEquityPenetration',
  // 股权穿透图
  ChartGqct = 'chart_gqct',
  // 实控人
  ChartActualController = 'chart_yskzr',
  // 受益所有人
  ChartBeneficialOwner = 'chart_qysyr_owner',
  // 受益自然人
  ChartBeneficiaryNaturalPerson = 'chart_qysyr_natural',
  // 受益机构
  ChartBeneficiaryInstitution = 'chart_qysyr_org',
  // 对外投资
  ChartTzct = 'chart_tzct',
  // 企业图谱
  ChartQytp = 'chart_qytp',
  // 融资图谱
  ChartRztp = 'chart_rztp',

  // ===== 基础信息卡片 =====
  // 企业卡片
  Company = 'company',
  // 人物卡片
  Character = 'character',
  // 招投标卡片
  Bid = 'bid',
  // 招聘卡片
  Job = 'job',
  // 标准信息
  Standard = 'standard',
  // 专利信息
  Patent = 'patent',
  // 商标
  Trademark = 'trademark',
  // 集团系
  Group = 'group',

  // ===== 报告类卡片 =====
  // 尽职调查报告
  AgentDueDiligenceReport = 'AgentDueDiligenceReport',
  // 深度信用报告
  AgentDepthCreditReport = 'AgentDepthCreditReport',

  // ===== 可视化图表 =====
  // 柱状图
  Bar = 'bar',
  // 折线图
  Line = 'line',
  // 饼图
  Pie = 'pie',
}
```

## 五、使用注意事项

1. 所有接口应当统一使用上述格式之一
2. 状态码`ErrorCode`为 0 表示操作成功
3. 聊天接口的`gelData`字段是一个数组，可包含多种卡片数据
4. 开发新接口时应遵循上述数据格式规范
5. 前端解析时应当注意兼容性处理
