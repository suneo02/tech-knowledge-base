# 财务报表接口文档

## 接口概述

本文档包含两个财务报表相关接口：

1. **财务报表汇总接口**：用于一次性获取企业的利润表、资产负债表和现金流表三个财务报表的数据，并按报告期进行合并返回。该接口采用并行调用方式，相比分别调用三个接口可以显著提升性能。

2. **财务报表筛选项接口**：用于获取财务报表的可用筛选条件，包括年份范围、报表类型和报表模板选项。该接口根据企业类型（上市/发债企业或非上市非发债企业）动态返回可用选项。

---

# 1. 财务报表汇总接口

---

## 接口信息

### 基本信息

| 项目             | 内容                                                                  |
| :--------------- | :-------------------------------------------------------------------- |
| **接口名称**     | 财务报表汇总                                                          |
| **接口标识**     | `financialreportsummary`                                              |
| **请求方式**     | `POST`                                                                |
| **接口路径**     | `/Enterprise/gel/detail/company/financialreportsummary/{companyCode}` |
| **Content-Type** | `application/x-www-form-urlencoded`                                   |

### 完整URL示例

```
测试环境：https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportsummary/1020515907
生产环境：https://114.80.154.45/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportsummary/{companyCode}
```

---

## 请求参数

### 路径参数

| 参数名        | 类型   | 必填 | 说明                     | 示例         |
| :------------ | :----- | :--- | :----------------------- | :----------- |
| `companyCode` | String | 是   | 企业代码（公司唯一标识） | `1020515907` |

### Body参数（application/x-www-form-urlencoded）

| 参数名           | 类型   | 必填 | 默认值            | 说明                                  | 示例          |
| :--------------- | :----- | :--- | :---------------- | :------------------------------------ | :------------ |
| `regionType`     | String | 否   | `全部`            | 区域类型：`境内`/`境外`/`全部`        | `全部`        |
| `reportTemplate` | String | 否   | `年报&累计报`     | 报表模板：`年报&累计报`/`年报&单季报` | `年报&单季报` |
| `reportType`     | String | 否   | `合并报表`        | 报表类型：`合并报表`/`合并调整`       | `合并报表`    |
| `reportDate`     | String | 否   | `[1900,当前年份]` | 报告期时间区间，支持区间表示法        | `[2022,2025]` |

#### reportDate 参数说明

支持以下格式：

- `[2022,2025]`：2022年至2025年（闭区间）
- `[2022,)`：2022年至今（左闭右开）
- `(,2025]`：从最早到2025年（左开右闭）
- `[20220303,20250301]`：支持精确到日期（yyyyMMdd格式）

---

## 响应参数

### 响应结构

```json
{
  "data": [
    {
      // 公共字段
      "companyCode": "企业代码",
      "_reportDate": "截止日期",
      "obObjectName": "报告类型名称",
      "_regionType": "区域类型（境内/境外）",
      "_reportType": "报表类型",
      "_reportTemplate": "报表模板",
      "_reportPeriod": "年报",
      "codeType": "代码类型",

      // 利润表字段
      "_sumBusinessIncome": "营业总收入",
      "_sumBusinessIncomeMag": "营业总收入量级",
      "_sumBusinessIncomeDim": "营业总收入币种",
      "_businessProfit": "营业利润",
      "_businessProfitMag": "营业利润量级",
      "_businessProfitDim": "营业利润币种",
      "_netProfit": "净利润",
      "_netProfitMag": "净利润量级",
      "_netProfitDim": "净利润币种",
      "_netProfit2": "归属于母公司所有者的净利润",
      "_netProfit2Mag": "归母净利润量级",
      "_netProfit2Dim": "归母净利润币种",
      "_sumProfit": "利润总额",
      "_sumProfitMag": "利润总额量级",
      "_sumProfitDim": "利润总额币种",
      "_sumBusinessCost": "营业总成本",
      "_sumBusinessCostMag": "营业总成本量级",
      "_sumBusinessCostDim": "营业总成本币种",
      "_nonRecurringGainsAndLosses": "非经常性损益",
      "_nonRecurringGainsAndLossesMag": "非经常性损益量级",
      "_nonRecurringGainsAndLossesDim": "非经常性损益币种",
      "_netProfitAfterDeductingNonRecurring": "扣非后净利润",
      "_netProfitAfterDeductingNonRecurringMag": "扣非后净利润量级",
      "_netProfitAfterDeductingNonRecurringDim": "扣非后净利润币种",
      "_rdExpenses": "研发费用",
      "_rdExpensesMag": "研发费用量级",
      "_rdExpensesDim": "研发费用币种",
      "_ebit": "息税前利润",
      "_ebitMag": "息税前利润量级",
      "_ebitDim": "息税前利润币种",
      "_ebitda": "息税折旧摊销前利润",
      "_ebitdaMag": "息税折旧摊销前利润量级",
      "_ebitdaDim": "息税折旧摊销前利润币种",

      // 资产负债表字段
      "_sumOfAsset": "资产总计",
      "_sumOfAssetMag": "资产总计量级",
      "_sumOfAssetDim": "资产总计币种",
      "_sumOfDebt": "负债合计",
      "_sumOfDebtMag": "负债合计量级",
      "_sumOfDebtDim": "负债合计币种",
      "_sumOfHolderRightsAndInterests1": "归属于母公司所有者权益合计",
      "_sumOfHolderRightsAndInterests1Mag": "归母权益量级",
      "_sumOfHolderRightsAndInterests1Dim": "归母权益币种",
      "_sumOfHolderRightsAndInterests2": "所有者权益合计",
      "_sumOfHolderRightsAndInterests2Mag": "所有者权益量级",
      "_sumOfHolderRightsAndInterests2Dim": "所有者权益币种",
      "_currentLiabilities": "流动负债",
      "_currentLiabilitiesMag": "流动负债量级",
      "_currentLiabilitiesDim": "流动负债币种",
      "_noncurrentLiabilities": "非流动负债",
      "_noncurrentLiabilitiesMag": "非流动负债量级",
      "_noncurrentLiabilitiesDim": "非流动负债币种",
      "_currentAssets": "流动资产",
      "_currentAssetsMag": "流动资产量级",
      "_currentAssetsDim": "流动资产币种",
      "_fixedAssets": "固定资产",
      "_fixedAssetsMag": "固定资产量级",
      "_fixedAssetsDim": "固定资产币种",
      "_longTermEquityInvestment": "长期股权投资",
      "_longTermEquityInvestmentMag": "长期股权投资量级",
      "_longTermEquityInvestmentDim": "长期股权投资币种",
      "_capitalReserve": "资本公积",
      "_capitalReserveMag": "资本公积量级",
      "_capitalReserveDim": "资本公积币种",
      "_surplusReserve": "盈余公积",
      "_surplusReserveMag": "盈余公积量级",
      "_surplusReserveDim": "盈余公积币种",
      "_undistributedProfit": "未分配利润",
      "_undistributedProfitMag": "未分配利润量级",
      "_undistributedProfitDim": "未分配利润币种",

      // 现金流表字段
      "_sumOfBusinessCash": "经营活动现金流入小计",
      "_sumOfBusinessCashMag": "经营活动现金流入量级",
      "_sumOfBusinessCashDim": "经营活动现金流入币种",
      "_sumOfBusinessCashPayout": "经营活动现金流出小计",
      "_sumOfBusinessCashPayoutMag": "经营活动现金流出量级",
      "_sumOfBusinessCashPayoutDim": "经营活动现金流出币种",
      "_netNumberOfBusinessCashPayout2": "经营活动产生的现金流量净额",
      "_netNumberOfBusinessCashPayout2Mag": "经营现金流净额量级",
      "_netNumberOfBusinessCashPayout2Dim": "经营现金流净额币种",
      "_sumOfOtherBusinessCashIn": "投资活动现金流入小计",
      "_sumOfOtherBusinessCashInMag": "投资活动现金流入量级",
      "_sumOfOtherBusinessCashInDim": "投资活动现金流入币种",
      "_sumOfInvestmentCashOut": "投资活动现金流出小计",
      "_sumOfInvestmentCashOutMag": "投资活动现金流出量级",
      "_sumOfInvestmentCashOutDim": "投资活动现金流出币种",
      "_netCashOfInvestment": "投资活动产生的现金流量净额",
      "_netCashOfInvestmentMag": "投资现金流净额量级",
      "_netCashOfInvestmentDim": "投资现金流净额币种",
      "_sumOfChipingCapital": "筹资活动现金流入小计",
      "_sumOfChipingCapitalMag": "筹资活动现金流入量级",
      "_sumOfChipingCapitalDim": "筹资活动现金流入币种",
      "_sumForChippingCapital": "筹资活动现金流出小计",
      "_sumForChippingCapitalMag": "筹资活动现金流出量级",
      "_sumForChippingCapitalDim": "筹资活动现金流出币种",
      "_netNumberForChippingCapital": "筹资活动产生的现金流量净额",
      "_netNumberForChippingCapitalMag": "筹资现金流净额量级",
      "_netNumberForChippingCapitalDim": "筹资现金流净额币种"
    }
  ],
  "total": 15
}
```

### 字段说明

#### 公共字段

| 字段名            | 类型   | 说明                                                                               |
| :---------------- | :----- | :--------------------------------------------------------------------------------- |
| `companyCode`     | String | 企业代码                                                                           |
| `_reportDate`     | Date   | 报告日期，格式：yyyy-MM-dd                                                         |
| `obObjectName`    | String | 报告类型名称（如：第一季报、中报、第三季报、年报）                                 |
| `_regionType`     | String | 区域类型：`境内` 或 `境外`                                                         |
| `_reportType`     | String | 报表类型：`合并报表` 或 `合并调整`                                                 |
| `_reportTemplate` | String | 报表模板：`年报&累计报` 或 `年报&单季报`                                           |
| `codeType`        | String | 代码类型：`stdStock`（境内股票）、`oversea`（境外股票）、`companyId`（非上市企业） |

#### 数据字段特点

1. **数值字段**：以 `_` 开头的字段为实际数据值（如 `_sumBusinessIncome`）
2. **量级字段**：以 `Mag` 结尾的字段表示数据量级，通常为 `万元`
3. **币种字段**：以 `Dim` 结尾的字段表示币种，如 `CNY`（人民币）、`HKD`（港币）等

#### 数据可用性

- 如果某个报表（利润表/资产负债表/现金流表）没有数据，对应字段值为 `null`
- 同一报告期的三个报表数据会合并在同一个对象中
- 数据按报告期倒序排列（最新的在前）

---

## 请求示例

### cURL 示例

```bash
curl --location --request POST 'https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportsummary/1020515907' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--header 'Cookie: wind.sessionid=YOUR_SESSION_ID' \
--data-urlencode 'regionType=全部' \
--data-urlencode 'reportTemplate=年报&单季报' \
--data-urlencode 'reportDate=[2022,2025]'
```

### JavaScript (Fetch) 示例

```javascript
const url =
  'https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportsummary/1020515907'

const params = new URLSearchParams()
params.append('regionType', '全部')
params.append('reportTemplate', '年报&单季报')
params.append('reportDate', '[2022,2025]')

fetch(url, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded',
    Cookie: 'wind.sessionid=YOUR_SESSION_ID',
  },
  body: params,
})
  .then((response) => response.json())
  .then((data) => {
    console.log('财务报表汇总数据：', data)
    console.log('总记录数：', data.total)

    // 遍历每个报告期的数据
    data.data.forEach((item) => {
      console.log(`报告期：${item._reportDate}`)
      console.log(`营业收入：${item._sumBusinessIncome} ${item._sumBusinessIncomeMag}`)
      console.log(`净利润：${item._netProfit2} ${item._netProfit2Mag}`)
      console.log(`资产总计：${item._sumOfAsset} ${item._sumOfAssetMag}`)
      console.log(`经营现金流：${item._netNumberOfBusinessCashPayout2} ${item._netNumberOfBusinessCashPayout2Mag}`)
    })
  })
  .catch((error) => console.error('Error:', error))
```

### Axios 示例

```javascript
import axios from 'axios'

const companyCode = '1020515907'

axios
  .post(
    `https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportsummary/${companyCode}`,
    new URLSearchParams({
      regionType: '全部',
      reportTemplate: '年报&单季报',
      reportDate: '[2022,2025]',
    }),
    {
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
        Cookie: 'wind.sessionid=YOUR_SESSION_ID',
      },
    }
  )
  .then((response) => {
    const { data, total } = response.data
    console.log(`获取到 ${total} 条财务报表汇总数据`)

    // 处理数据
    data.forEach((report) => {
      console.log({
        报告期: report._reportDate,
        营业收入: report._sumBusinessIncome,
        净利润: report._netProfit2,
        总资产: report._sumOfAsset,
        总负债: report._sumOfDebt,
      })
    })
  })
  .catch((error) => {
    console.error('请求失败：', error)
  })
```

---

## 响应示例

```json
{
  "data": [
    {
      "companyCode": "1020515907",
      "_reportDate": "2024-12-31T00:00:00.000+00:00",
      "obObjectName": "年报",
      "_regionType": "境内",
      "_reportType": "合并报表",
      "_reportTemplate": "年报&单季报",
      "codeType": "stdStock",

      "_sumBusinessIncome": 550000.0,
      "_sumBusinessIncomeMag": "万元",
      "_sumBusinessIncomeDim": "CNY",
      "_businessProfit": 85000.0,
      "_businessProfitMag": "万元",
      "_businessProfitDim": "CNY",
      "_netProfit": 72000.0,
      "_netProfitMag": "万元",
      "_netProfitDim": "CNY",
      "_netProfit2": 68000.0,
      "_netProfit2Mag": "万元",
      "_netProfit2Dim": "CNY",

      "_sumOfAsset": 2500000.0,
      "_sumOfAssetMag": "万元",
      "_sumOfAssetDim": "CNY",
      "_sumOfDebt": 1200000.0,
      "_sumOfDebtMag": "万元",
      "_sumOfDebtDim": "CNY",
      "_sumOfHolderRightsAndInterests2": 1300000.0,
      "_sumOfHolderRightsAndInterests2Mag": "万元",
      "_sumOfHolderRightsAndInterests2Dim": "CNY",

      "_netNumberOfBusinessCashPayout2": 95000.0,
      "_netNumberOfBusinessCashPayout2Mag": "万元",
      "_netNumberOfBusinessCashPayout2Dim": "CNY",
      "_netCashOfInvestment": -45000.0,
      "_netCashOfInvestmentMag": "万元",
      "_netCashOfInvestmentDim": "CNY",
      "_netNumberForChippingCapital": -20000.0,
      "_netNumberForChippingCapitalMag": "万元",
      "_netNumberForChippingCapitalDim": "CNY"
    },
    {
      "companyCode": "1020515907",
      "_reportDate": "2023-12-31T00:00:00.000+00:00",
      "obObjectName": "年报",
      "_regionType": "境内",
      "_reportType": "合并报表",
      "_reportTemplate": "年报&单季报",
      "codeType": "stdStock",

      "_sumBusinessIncome": 480000.0,
      "_sumBusinessIncomeMag": "万元",
      "_sumBusinessIncomeDim": "CNY",
      "_netProfit2": 58000.0,
      "_netProfit2Mag": "万元",
      "_netProfit2Dim": "CNY",

      "_sumOfAsset": 2300000.0,
      "_sumOfAssetMag": "万元",
      "_sumOfAssetDim": "CNY"
    }
  ],
  "total": 2
}
```

---

## 错误处理

### 错误响应格式

```json
{
  "data": [],
  "total": 0,
  "message": "错误信息描述"
}
```

### 常见错误

| HTTP状态码 | 错误说明       | 解决方案                  |
| :--------- | :------------- | :------------------------ |
| 400        | 参数错误       | 检查请求参数格式是否正确  |
| 401        | 未授权         | 检查 session 是否有效     |
| 404        | 企业不存在     | 检查 companyCode 是否正确 |
| 500        | 服务器内部错误 | 联系技术支持              |

---

## 性能说明

### 并行调用优化

本接口内部采用并行调用方式同时获取三个财务报表数据：

- 利润表
- 资产负债表
- 现金流表

**性能优势：**

- 串行调用（分别调用三个接口）：约 500-800ms
- 并行调用（本接口）：约 200-300ms
- **性能提升约 60-70%**

### 建议

1. 如果只需要单个报表数据，建议调用对应的单独接口：

   - `getprofit` - 利润表
   - `getbalancesheet` - 资产负债表
   - `getcashflowsheet` - 现金流表

2. 如果需要展示完整的财务报表概览，建议使用本汇总接口

---

## 数据说明

### 报告期类型

- **第一季报**：Q1（3月31日）
- **中报/半年报**：Q2（6月30日）
- **第三季报**：Q3（9月30日）
- **年报**：Q4（12月31日）

### 数据来源

1. **上市发债企业**：

   - 境内：Wind 金融数据库
   - 境外：香港/台湾上市公司数据

2. **非上市企业**：
   - 万得财汇（WFC）企业财务数据

### 数据更新频率

- 上市公司：根据披露时间实时更新
- 非上市企业：季度更新

---

## 注意事项

1. **必需请求头**：

   - `Content-Type: application/x-www-form-urlencoded`
   - `Cookie: wind.sessionid=YOUR_SESSION_ID`（需要有效的会话）

2. **数据完整性**：

   - 不是所有企业都有完整的三个报表数据
   - 部分企业可能只有部分报表数据
   - 境外企业的财务数据字段可能有所不同

3. **日期格式**：

   - `_reportDate` 返回的是 ISO 8601 格式
   - 前端需要根据实际需求格式化显示

4. **数据排序**：
   - 默认按 `_reportDate` 倒序排列（最新的在前）
   - 如需其他排序方式，前端自行处理

---

## 版本历史

| 版本 | 日期       | 说明                               |
| :--- | :--------- | :--------------------------------- |
| v1.0 | 2025-11-21 | 初始版本，支持三个财务报表数据汇总 |

---

# 2. 财务报表筛选项接口

---

## 接口信息

### 基本信息

| 项目             | 内容                                                                  |
| :--------------- | :-------------------------------------------------------------------- |
| **接口名称**     | 财务报表筛选项                                                        |
| **接口标识**     | `financialreportfilters`                                              |
| **请求方式**     | `POST`                                                                |
| **接口路径**     | `/Enterprise/gel/detail/company/financialreportfilters/{companyCode}` |
| **Content-Type** | `application/x-www-form-urlencoded`                                   |

### 完整URL示例

```
测试环境：https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportfilters/1020515907
生产环境：https://114.80.154.45/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportfilters/{companyCode}
```

---

## 请求参数

### 路径参数

| 参数名        | 类型   | 必填 | 说明                     | 示例         |
| :------------ | :----- | :--- | :----------------------- | :----------- |
| `companyCode` | String | 是   | 企业代码（公司唯一标识） | `1020515907` |

### Body参数（application/x-www-form-urlencoded）

| 参数名           | 类型   | 必填 | 默认值        | 说明                                                 | 示例          |
| :--------------- | :----- | :--- | :------------ | :--------------------------------------------------- | :------------ |
| `regionType`     | String | 否   | `境内`        | 区域类型：`境内`/`境外`                              | `境内`        |
| `reportDate`     | String | 否   | 空            | 报告期时间区间（为空时应用默认过滤，只返回头尾两年） | `[2022,2025]` |
| `reportType`     | String | 否   | `合并报表`    | 报表类型：`合并报表`/`合并调整`                      | `合并报表`    |
| `reportTemplate` | String | 否   | `年报&累计报` | 报表模板：`年报&累计报`/`年报&单季报`                | `年报&单季报` |

#### 参数说明

1. **regionType**：

   - 默认为 `境内`（与汇总接口一致）
   - 用于获取对应区域的财报年份数据

2. **reportDate**：

   - 为空时：只返回头尾两年（最旧和最新年份）
   - 有值时：返回更多年份数据（最多20年）
   - 通常前端调用时不传此参数，使用默认过滤

3. **reportType 和 reportTemplate**：
   - 传入的值将作为筛选项返回结果中的 `value` 字段
   - 用于前端表单回显当前选中的值

---

## 响应参数

### 响应结构

```json
{
  "data": {
    "reportData": {
      "value": ["2020", "2025"]
    },
    "reportType": {
      "options": [
        {
          "label": "合并报表",
          "value": "合并报表"
        },
        {
          "label": "合并调整",
          "value": "合并调整"
        }
      ],
      "value": "合并报表"
    },
    "reportTemplate": {
      "options": [
        {
          "label": "年报&累计报",
          "value": "年报&累计报"
        },
        {
          "label": "年报&单季报",
          "value": "年报&单季报"
        }
      ],
      "value": "年报&累计报"
    }
  }
}
```

### 字段说明

#### reportData（年份筛选项）

| 字段名  | 类型     | 说明                                           |
| :------ | :------- | :--------------------------------------------- |
| `value` | String[] | 可选年份数组，默认只包含头尾两年（最旧和最新） |

**逻辑说明**：

- 当 `reportDate` 参数为空时（默认情况）：
  - 如果企业财报年份 ≤ 2个，返回所有年份
  - 如果企业财报年份 > 2个，只返回最旧年份和最新年份
  - 示例：企业有 2020-2025 年的财报，返回 `["2020", "2025"]`
- 当 `reportDate` 参数有值时：
  - 返回更多年份（最多20年），用于高级筛选场景

#### reportType（报表类型筛选项）

| 字段名            | 类型   | 说明                             |
| :---------------- | :----- | :------------------------------- |
| `options`         | Array  | 可选的报表类型列表               |
| `options[].label` | String | 显示文本                         |
| `options[].value` | String | 选项值                           |
| `value`           | String | 当前选中的值（来自入参或默认值） |

**动态逻辑**：

- **非上市非发债企业**：只返回 `["合并报表"]`
- **上市/发债企业**：返回 `["合并报表", "合并调整"]`

#### reportTemplate（报表模板筛选项）

| 字段名            | 类型   | 说明                             |
| :---------------- | :----- | :------------------------------- |
| `options`         | Array  | 可选的报表模板列表               |
| `options[].label` | String | 显示文本                         |
| `options[].value` | String | 选项值                           |
| `value`           | String | 当前选中的值（来自入参或默认值） |

**动态逻辑**：

- **非上市非发债企业**：只返回 `["年报&累计报"]`
- **上市/发债企业**：返回 `["年报&累计报", "年报&单季报"]`

---

## 请求示例

### cURL 示例

```bash
# 基础请求（使用默认参数）
curl --location --request POST 'https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportfilters/1020515907' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--header 'Cookie: wind.sessionid=YOUR_SESSION_ID'

# 带参数请求（指定区域和当前选中值）
curl --location --request POST 'https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportfilters/1020515907' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--header 'Cookie: wind.sessionid=YOUR_SESSION_ID' \
--data-urlencode 'regionType=境外' \
--data-urlencode 'reportType=合并调整'
```

### JavaScript (Fetch) 示例

```javascript
const companyCode = '1020515907'
const url = `https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportfilters/${companyCode}`

// 基础请求
fetch(url, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/x-www-form-urlencoded',
    Cookie: 'wind.sessionid=YOUR_SESSION_ID',
  },
})
  .then((response) => response.json())
  .then((result) => {
    const { reportData, reportType, reportTemplate } = result.data

    console.log('可选年份：', reportData.value) // ["2020", "2025"]
    console.log('报表类型选项：', reportType.options)
    console.log('当前报表类型：', reportType.value)
    console.log('报表模板选项：', reportTemplate.options)
    console.log('当前报表模板：', reportTemplate.value)

    // 前端可以直接使用这些数据渲染表单
    // 年份：renderYearSelect(reportData.value)
    // 报表类型：renderTypeSelect(reportType.options, reportType.value)
    // 报表模板：renderTemplateSelect(reportTemplate.options, reportTemplate.value)
  })
  .catch((error) => console.error('Error:', error))
```

### Axios 示例

```javascript
import axios from 'axios'

const companyCode = '1020515907'

// 获取境内财报筛选项
axios
  .post(
    `https://test.wind.com.cn/Wind.WFC.Enterprise.Web/Enterprise/gel/detail/company/financialreportfilters/${companyCode}`,
    new URLSearchParams({
      regionType: '境内',
    }),
    {
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
        Cookie: 'wind.sessionid=YOUR_SESSION_ID',
      },
    }
  )
  .then((response) => {
    const filters = response.data.data

    // 渲染年份选择器
    const yearOptions = filters.reportData.value.map((year) => ({
      label: `${year}年`,
      value: year,
    }))

    // 渲染报表类型选择器
    const typeOptions = filters.reportType.options
    const defaultType = filters.reportType.value

    // 渲染报表模板选择器
    const templateOptions = filters.reportTemplate.options
    const defaultTemplate = filters.reportTemplate.value

    console.log('筛选项配置：', {
      years: yearOptions,
      types: typeOptions,
      templates: templateOptions,
    })
  })
  .catch((error) => {
    console.error('获取筛选项失败：', error)
  })
```

---

## 响应示例

### 示例1：上市公司（完整选项）

**请求**：

```
POST /Enterprise/gel/detail/company/financialreportfilters/1020515907
regionType=境内
```

**响应**：

```json
{
  "data": {
    "reportData": {
      "value": ["2020", "2025"]
    },
    "reportType": {
      "options": [
        {
          "label": "合并报表",
          "value": "合并报表"
        },
        {
          "label": "合并调整",
          "value": "合并调整"
        }
      ],
      "value": "合并报表"
    },
    "reportTemplate": {
      "options": [
        {
          "label": "年报&累计报",
          "value": "年报&累计报"
        },
        {
          "label": "年报&单季报",
          "value": "年报&单季报"
        }
      ],
      "value": "年报&累计报"
    }
  }
}
```

### 示例2：非上市企业（受限选项）

**请求**：

```
POST /Enterprise/gel/detail/company/financialreportfilters/9876543210
regionType=境内
```

**响应**：

```json
{
  "data": {
    "reportData": {
      "value": ["2022", "2024"]
    },
    "reportType": {
      "options": [
        {
          "label": "合并报表",
          "value": "合并报表"
        }
      ],
      "value": "合并报表"
    },
    "reportTemplate": {
      "options": [
        {
          "label": "年报&累计报",
          "value": "年报&累计报"
        }
      ],
      "value": "年报&累计报"
    }
  }
}
```

**说明**：非上市非发债企业只有基础的财报选项，不支持"合并调整"和"年报&单季报"。

### 示例3：带入参回显

**请求**：

```
POST /Enterprise/gel/detail/company/financialreportfilters/1020515907
regionType=境外
reportType=合并调整
reportTemplate=年报&单季报
```

**响应**：

```json
{
  "data": {
    "reportData": {
      "value": ["2021", "2025"]
    },
    "reportType": {
      "options": [
        {
          "label": "合并报表",
          "value": "合并报表"
        },
        {
          "label": "合并调整",
          "value": "合并调整"
        }
      ],
      "value": "合并调整"
    },
    "reportTemplate": {
      "options": [
        {
          "label": "年报&累计报",
          "value": "年报&累计报"
        },
        {
          "label": "年报&单季报",
          "value": "年报&单季报"
        }
      ],
      "value": "年报&单季报"
    }
  }
}
```

**说明**：`value` 字段返回的是入参传入的值，用于前端表单回显。

---

## 使用场景

### 场景1：页面初始化

```javascript
// 页面加载时获取筛选项
async function initFilters(companyCode) {
  const response = await fetch(`/Enterprise/gel/detail/company/financialreportfilters/${companyCode}`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
      Cookie: 'wind.sessionid=YOUR_SESSION_ID',
    },
  })

  const result = await response.json()
  const filters = result.data

  // 渲染年份下拉框
  renderYearSelect(filters.reportData.value)

  // 渲染报表类型单选框
  renderTypeRadio(filters.reportType.options, filters.reportType.value)

  // 渲染报表模板单选框
  renderTemplateRadio(filters.reportTemplate.options, filters.reportTemplate.value)
}
```

### 场景2：切换区域后更新筛选项

```javascript
// 用户切换境内/境外时，重新获取筛选项
async function onRegionChange(companyCode, newRegion) {
  const params = new URLSearchParams()
  params.append('regionType', newRegion)

  const response = await fetch(`/Enterprise/gel/detail/company/financialreportfilters/${companyCode}`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
    },
    body: params,
  })

  const result = await response.json()
  const filters = result.data

  // 更新年份选项（境内境外的年份可能不同）
  updateYearSelect(filters.reportData.value)
}
```

### 场景3：配合汇总接口使用

```javascript
// 完整的查询流程
async function queryFinancialReports(companyCode) {
  // 1. 获取筛选项
  const filtersResponse = await fetch(`/Enterprise/gel/detail/company/financialreportfilters/${companyCode}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
  })
  const filters = (await filtersResponse.json()).data

  // 2. 渲染筛选表单
  renderFilters(filters)

  // 3. 用户选择筛选条件后，调用汇总接口
  const queryParams = new URLSearchParams({
    regionType: userSelectedRegion,
    reportType: userSelectedType,
    reportTemplate: userSelectedTemplate,
    reportDate: `[${filters.reportData.value[0]},${filters.reportData.value[1]}]`,
  })

  const dataResponse = await fetch(`/Enterprise/gel/detail/company/financialreportsummary/${companyCode}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: queryParams,
  })

  const data = await dataResponse.json()
  renderTable(data)
}
```

---

## 错误处理

### 错误响应格式

```json
{
  "data": null,
  "message": "错误信息描述"
}
```

### 常见错误

| HTTP状态码 | 错误说明       | 解决方案                      |
| :--------- | :------------- | :---------------------------- |
| 400        | 参数错误       | 检查 companyCode 格式是否正确 |
| 401        | 未授权         | 检查 session 是否有效         |
| 404        | 企业不存在     | 检查 companyCode 是否正确     |
| 500        | 服务器内部错误 | 联系技术支持                  |

---

## 注意事项

1. **与汇总接口的关系**：

   - 筛选项接口与财务报表汇总接口使用相同的参数格式
   - 筛选项接口返回的选项与汇总接口实际可查询的数据完全对应
   - 建议先调用筛选项接口获取可用选项，再调用汇总接口查询数据

2. **动态选项**：

   - 报表类型和报表模板的选项会根据企业类型动态调整
   - 非上市非发债企业只有基础选项
   - 上市/发债企业有完整选项

3. **年份范围**：

   - 默认只返回头尾两年，避免下拉框选项过多
   - 前端可以使用这两个年份作为时间范围查询
   - 示例：`reportDate=[2020,2025]` 查询2020到2025年的所有财报

4. **缓存建议**：

   - 筛选项数据相对稳定，建议前端缓存5-10分钟
   - 切换企业时需要重新获取筛选项

5. **必需请求头**：
   - `Content-Type: application/x-www-form-urlencoded`
   - `Cookie: wind.sessionid=YOUR_SESSION_ID`（需要有效的会话）

---

## 版本历史

| 版本 | 日期       | 说明                         |
| :--- | :--------- | :--------------------------- |
| v1.0 | 2025-11-25 | 初始版本，支持动态筛选项获取 |

---

## 联系方式

如有问题，请联系：

- 技术支持：[技术支持邮箱]
- 接口负责人：[负责人信息]
