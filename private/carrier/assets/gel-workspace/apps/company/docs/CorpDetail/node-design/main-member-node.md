# 主要人员节点设计

## 概述

主要人员节点用于展示企业的高级管理人员信息，包括董事、监事、高级管理人员等。该节点支持多数据源切换和标签页展示，满足不同的业务场景需求。

## 🎯 设计目标

### 业务目标
- 多数据源支持：支持公示、工商、年报等不同数据源
- 分类展示：按职务类型分类展示主要人员
- 信息完整性：展示完整的职务信息和任职状态
- 数据权威性：标识数据来源和更新时间

### 技术目标
- 配置驱动：通过配置控制数据源和展示方式
- 响应式布局：适配不同屏幕尺寸
- 性能优化：支持分页和数据缓存
- 错误处理：完善的异常处理机制

## 📋 配置结构

### 基础配置

| 配置项 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| `title` | string | 是 | - | 节点标题，如"主要人员" |
| `eachTableKey` | string | 是 | - | 固定值：`showMainMemberInfo` |
| `cmd` | string | 是 | - | 数据接口，如`/detail/company/getMainMember` |
| `columns` | array | 是 | - | 列配置，定义展示字段 |
| `pageSize` | number | 否 | 10 | 每页显示条数 |

### 特殊配置

| 配置项 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| `supportMultiDataSource` | boolean | 否 | true | 是否支持多数据源 |
| `defaultDataSource` | string | 否 | publish | 默认数据源 |
| `supportTabDisplay` | boolean | 否 | true | 是否支持标签页展示 |
| `tabCategories` | array | 否 | - | 标签页分类配置 |

### 交互配置

| 配置项 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| `enableDataSourceSwitch` | boolean | 否 | true | 启用数据源切换 |
| `enableTabSwitch` | boolean | 否 | true | 启用标签页切换 |
| `enablePagination` | boolean | 否 | true | 启用分页 |
| `enableSearch` | boolean | 否 | false | 启用搜索功能 |
| `enableFilter` | boolean | 否 | false | 启用筛选功能 |

## 🏗️ 节点类型定义

### 数据源类型

支持公示系统、工商系统、年报系统和手工录入等数据源类型。

### 职务分类

支持董事、监事、高级管理人员和其他职务分类。

### 任职状态

支持在任、离任、被罢免和其他任职状态。

## 🔧 配置示例

### 基础配置

包含标题、节点标识、接口、列配置和分页大小等基础信息。

### 完整配置

在基础配置上增加特殊配置和交互配置，支持多数据源、标签页展示、数据源切换、标签页切换、分页和搜索等功能。

## 🎨 交互设计

### 数据源切换

| 交互元素 | 位置 | 行为 | 说明 |
|----------|------|------|------|
| **数据源选择器** | 顶部工具栏 | 下拉选择 | 支持publish/business/annual/manual |
| **数据源标识** | 表格右上角 | 图标+文字 | 显示当前数据源 |
| **数据更新时间** | 表格底部 | 文本显示 | 显示数据最后更新时间 |

### 标签页切换

| 交互元素 | 位置 | 行为 | 说明 |
|----------|------|------|------|
| **标签页导航** | 数据源下方 | 点击切换 | 按职务分类展示 |
| **标签页计数** | 标签页标题 | 数字显示 | 显示每类人员数量 |
| **全部标签** | 第一个标签 | 显示所有 | 不受分类筛选影响 |

### 搜索和筛选

| 交互元素 | 位置 | 行为 | 说明 |
|----------|------|------|------|
| **搜索框** | 顶部工具栏 | 实时搜索 | 支持姓名搜索 |
| **筛选器** | 搜索框旁 | 多选筛选 | 按任职状态筛选 |
| **重置按钮** | 筛选器旁 | 一键重置 | 清空所有筛选条件 |

## 📡 数据接口

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| `companycode` | string | 是 | 企业代码 |
| `dataSource` | string | 否 | 数据源类型 |
| `category` | string | 否 | 职务分类 |
| `page` | number | 否 | 页码 |
| `pageSize` | number | 否 | 每页条数 |
| `search` | string | 否 | 搜索关键词 |
| `status` | string[] | 否 | 任职状态筛选 |

### 响应数据结构

包含响应状态码、消息和数据，数据中包含总数、人员列表、数据源、更新时间和分类统计等信息。每个人员项包含ID、姓名、职务、职务分类、任职状态、任职日期、数据源、置信度和备注等属性。分类统计包含分类类型、标题和数量。

## ⚡ 性能优化

### 数据缓存策略

| 缓存类型 | 缓存键 | 有效期 | 说明 |
|----------|--------|--------|------|
| **配置缓存** | `config:mainmember:${companyCode}` | 5分钟 | 缓存节点配置 |
| **数据缓存** | `data:mainmember:${companyCode}:${dataSource}` | 3分钟 | 缓存人员数据 |
| **分类缓存** | `category:mainmember:${companyCode}` | 10分钟 | 缓存分类统计 |

### 分页优化

| 优化项 | 策略 | 说明 |
|--------|------|------|
| **虚拟滚动** | 数据量>100时启用 | 减少DOM节点数量 |
| **分页预加载** | 提前加载下一页 | 提升用户体验 |
| **数据压缩** | 大数据量启用 | 减少传输数据量 |

### 渲染优化

| 优化项 | 策略 | 说明 |
|--------|------|------|
| **懒加载** | 标签页按需加载 | 减少初始加载时间 |
| **防抖搜索** | 300ms延迟 | 避免频繁请求 |
| **条件渲染** | 根据配置渲染 | 减少不必要的渲染 |

## 🛡️ 错误处理

### 业务错误

| 错误类型 | 错误码 | 处理策略 | 用户提示 |
|----------|--------|----------|----------|
| **数据不存在** | 404 | 显示空状态 | "暂无主要人员信息" |
| **数据源异常** | 503 | 切换备用源 | "当前数据源异常，已切换" |
| **权限不足** | 403 | 显示权限提示 | "暂无权限查看此数据" |
| **参数错误** | 400 | 重置参数 | "查询参数错误，已重置" |

### 系统错误

| 错误类型 | 处理策略 | 用户提示 |
|----------|----------|----------|
| **网络超时** | 重试3次 | "网络超时，请重试" |
| **服务异常** | 降级处理 | "服务异常，请稍后重试" |
| **数据格式错误** | 使用默认值 | "数据格式异常" |

## 📊 数据质量

### 置信度标识

| 置信度 | 标识 | 颜色 | 说明 |
|--------|------|------|------|
| **高(>90%)** | ● | 绿色 | 数据准确可靠 |
| **中(70%-90%)** | ● | 黄色 | 数据基本准确 |
| **低(<70%)** | ● | 红色 | 数据仅供参考 |

### 数据来源标识

| 数据源 | 标识 | 颜色 | 说明 |
|--------|------|------|------|
| **公示系统** | 公 | 蓝色 | 国家企业信用信息公示系统 |
| **工商系统** | 工 | 绿色 | 工商登记信息 |
| **年报系统** | 年 | 橙色 | 企业年报信息 |
| **手工录入** | 手 | 灰色 | 人工录入信息 |

## 🔧 扩展设计

### 功能扩展

| 扩展功能 | 配置项 | 说明 |
|----------|--------|------|
| **导出功能** | `enableExport` | 支持Excel导出 |
| **打印功能** | `enablePrint` | 支持表格打印 |
| **对比功能** | `enableCompare` | 支持历史对比 |
| **订阅功能** | `enableSubscribe` | 支持变更订阅 |

### 业务扩展

| 扩展业务 | 配置项 | 说明 |
|----------|--------|------|
| **关联企业** | `showRelatedCompanies` | 显示关联企业人员 |
| **历史任职** | `showHistoryTenure` | 显示历史任职记录 |
| **兼职信息** | `showPartTimeInfo` | 显示兼职情况 |
| **股权信息** | `showShareInfo` | 显示持股信息 |

## 📚 相关文档

- [节点设计规范](./node-design-spec.md) - 通用设计原则
- [配置消费机制](./config-consumption.md) - 配置消费流程
- [CompanyTable组件说明](../company-table.md) - 组件实现参考
- [企业详情页特殊节点配置说明](../special-node-config.md) - 特殊节点配置规范