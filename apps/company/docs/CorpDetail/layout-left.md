# 企业详情页左侧内容区设计

## 概述

左侧内容区负责企业信息展示，包含顶部操作栏、菜单导航和数据模块，支持与AI面板的企业上下文共享。

**功能边界**：企业信息展示、菜单导航、数据模块管理、滚动同步
**关键场景**：浏览企业信息、菜单导航、数据筛选

## 页面结构

| 区域           | 内容                     | 交互               | 可见条件         |
| -------------- | ------------------------ | ------------------ | ---------------- |
| **顶部操作栏** | 企业名称、收藏、操作按钮 | 收藏/导出/AI切换   | 完整页面模式     |
| **左侧菜单**   | 树形导航、搜索框         | 搜索/导航/展开折叠 | 非单模块模式     |
| **企业介绍**   | 基本信息卡片             | 查看详情/收藏      | 完整页面模式     |
| **数据模块**   | 企业数据表格             | 筛选/分页/排序     | 根据企业类型显示 |

## 核心数据

| 字段           | 来源         | 用途               | 刷新策略     |
| -------------- | ------------ | ------------------ | ------------ |
| `basicNum`     | 企业统计API  | 菜单构建、模块显示 | 数据变化时   |
| `corpCategory` | 企业类型识别 | 菜单配置           | 企业类型变更 |
| `selectedKeys` | 菜单状态     | 当前选中菜单       | 滚动/点击时  |
| `expandedKeys` | 菜单状态     | 展开的菜单节点     | 用户操作时   |

## 组件结构

```
Left
├── LayoutHeader (顶部操作栏)
└── CompanyDetail (企业详情)
    ├── CorpDetailMenu (左侧菜单)
    └── CompanyBase (数据模块)
```

### 组件职责

- **Left**：左侧容器、企业名称国际化
- **CompanyDetail**：菜单导航、数据展示、滚动同步
- **CorpDetailMenu**：树形菜单、搜索、状态管理
- **CompanyBase**：模块渲染、权限控制

## 菜单配置

### 配置生成

| 层级         | 文件                     | 逻辑         | 范围         |
| ------------ | ------------------------ | ------------ | ------------ |
| **基础配置** | `CompanyDetailBaseMenus` | 静态定义     | 全局标准模块 |
| **类型适配** | `useCorpMenuByType`      | Hook动态生成 | 企业类型特化 |
| **数据驱动** | `basicNum` 统计          | 条件激活     | 数据可用性   |
| **地区适配** | `corpArea` 参数          | 名称本地化   | 地区差异化   |

### 企业类型适配

| 企业类型     | 菜单处理               | 激活模块                |
| ------------ | ---------------------- | ----------------------- |
| **普通企业** | 标准菜单               | 基础+业务模块           |
| **私募基金** | 激活 `PrivateFundData` | 基金专用模块            |
| **公募基金** | 激活 `PublishFundData` | 基金规模+旗下基金       |
| **IPO企业**  | 激活 `IpoBusinessData` | 产量/销量/业务量/库存   |
| **海外企业** | 名称本地化             | "工商信息" → "基本信息" |

### 统计数字控制

不显示统计数字的模块：所属行业、股东信息、财务数据、实际控制人、科创分等。

## 菜单与模块联动

### 联动流程

企业数据加载 → 企业类型识别 → 基础菜单选择 → 统计数据检查 → 菜单项激活 → 菜单可见性设置 → 模块渲染控制 → 菜单与内容同步

### 控制策略

| 企业类型     | 渲染控制            | 可见性           |
| ------------ | ------------------- | ---------------- |
| **普通企业** | 标准配置 + 数据驱动 | 显示有数据的模块 |
| **特殊企业** | 精确配置过滤        | 仅显示配置的模块 |
| **基金企业** | 分类专用配置        | 显示基金专用模块 |

### 联动效果

- **菜单驱动**：左侧菜单决定中间区域显示内容
- **数据过滤**：只显示有统计数据的模块
- **类型适配**：企业类型决定菜单结构
- **精确控制**：特殊企业按精确配置显示模块

## 错误处理

| 错误类型         | 处理方式               | 用户反馈       |
| ---------------- | ---------------------- | -------------- |
| **数据加载失败** | 显示错误提示，提供重试 | "数据加载失败" |
| **权限不足**     | 显示VIP提示            | "需要VIP权限"  |
| **模块渲染异常** | 显示错误占位符         | "模块加载异常" |
| **菜单构建失败** | 显示简化菜单           | "导航功能受限" |

## 相关文档

- [总体设计](./design.md)
- [主容器布局](./layout-container.md)
- [核心业务设计](./layout-middle.md)
- [配置设计](./layout-config.md)
- [懒加载设计](./lazyLoad.md)
