# 实施计划：统一配置源重构

> 所属任务：[企业详情页配置重复维护问题](./README.md)
> 文档版本：v2

## 阶段一：基础设施

### 1.1 定义统一配置结构
- **目标**：定义 `UnifiedModuleConfig`, `ModuleTree` 接口。
- **验收**：覆盖所有现有字段，无 any 类型。

### 1.2 创建配置转换工具
- **目标**：实现 `buildVisibleModuleTree`, `convertToMenuConfig`。
- **验收**：正确过滤不可见模块；输出格式与现有一致；覆盖所有过滤场景（海外/个体）。

### 1.3 实现配置加载管理器
- **目标**：实现 `useModuleConfigLoader` Hook，支持缓存/Loading。
- **验收**：缓存命中正常；支持错误重试；提供进度反馈。

## 阶段二：配置迁移

### 2.1 创建统一配置文件
- **目标**：迁移 11 个模块配置，实现 `contentConfigLoader`。
- **验收**：统计字段映射一致；可见性规则覆盖全；配置顺序一致；TypeScript 检查通过。

## 阶段三：业务重构

### 3.1 重构菜单生成逻辑
- **目标**：`useCorpMenuByType` 使用统一配置源。
- **验收**：移除重复统计/过滤逻辑；菜单显示一致；代码减少 ≥ 30%。

### 3.2 重构内容生成逻辑
- **目标**：`listRowConfig` 移除全量导入，`CompanyBase` 支持按需加载。
- **验收**：首屏只加载可见模块；滚动按需加载；Loading 状态正常。

### 3.3 更新特殊企业过滤
- **目标**：解耦特殊企业逻辑，统一到可见性规则。
- **验收**：移除 `CompanyBase` 对菜单配置依赖；特殊企业显示一致。

## 阶段四：测试上线

### 4.1 性能验证
- **目标**：验证首屏时间、配置数量、内存占用。
- **验收**：首屏配置减少 ~45%；时间提升 ~30%；内存降低 ~40%。

### 4.2 回归测试
- **目标**：覆盖普通、海外、个体、特殊企业。
- **验收**：所有场景显示一致；无回归问题。
