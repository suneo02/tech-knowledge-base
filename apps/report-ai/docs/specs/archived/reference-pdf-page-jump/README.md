# 引用资料 PDF 多页码跳转功能

> 📖 本文档遵循 [Spec 文档编写规范](../../../../../docs/rule/doc-spec-rule.md)

## 任务概览

| 字段       | 内容                                                               |
| ---------- | ------------------------------------------------------------------ |
| 任务名称   | PDF 预览支持多页码快捷跳转与外部滚动控制                           |
| 状态       | 🔄 进行中                                                          |
| 优先级     | 🟡 P1                                                              |
| 负责人     | Kiro                                                               |
| 创建时间   | 2025-11-12                                                         |
| 更新时间   | 2025-11-12                                                         |
| 关联 Issue | [页码传递方案选择](../../issues/reference-page-number-solution.md) |
| 关联需求   | 支持编辑器引用跳转和列表文件点击两种入口的多页码快捷访问           |

## 文档索引

| 文档                                 | 阶段     | 状态 | 说明                 |
| ------------------------------------ | -------- | ---- | -------------------- |
| [需求与设计](./spec-core-v2.md)      | 需求设计 | 📝   | 背景、需求、方案设计 |
| [实施计划](./spec-implementation.md) | 实施拆解 | 📝   | 子任务拆解、时间规划 |

## 快速导航

- **核心目标**：PDF 预览组件支持多页码快捷按钮和外部滚动控制
- **两个入口场景**：
  1. 编辑器引用标记点击 → 单页码跳转
  2. 引用列表文件点击 → 多页码快捷按钮
- **涉及模块**：
  - 类型定义：`Reference/type` + `FilePreviewRenderer/types`
  - PDF 组件：`FilePreviewRenderer/PDFPreviewWrapper`
  - 预览逻辑：`Reference/useReferencePreview` + `previewDataUtils`
  - 列表组件：`Reference/ReferenceItemTable`
- **预期效果**：
  - 编辑器点击引用 → PDF 自动跳转到对应页码
  - 列表点击文件 → 显示多个页码快捷按钮，点击按钮跳转
  - 外部可调用方法直接滚动到指定页码

## 待办事项

- [ ] 扩展 `PreviewData` 和 `PDFPreviewWrapperProps`，支持多页码数组
- [ ] 实现 PDF 预览组件的页码快捷按钮 UI
- [ ] 实现外部滚动控制方法（通过 ref 暴露）
- [ ] 更新引用列表组件，传递多页码信息
- [ ] 更新预览数据工具，处理多页码场景
- [ ] 添加单元测试和集成测试（可选）

## 更新日志

| 日期       | 修改人 | 更新内容                                   |
| ---------- | ------ | ------------------------------------------ |
| 2025-11-12 | Kiro   | 升级任务范围，支持多页码快捷跳转和外部控制 |

## 相关文档

- [Spec 文档编写规范](../../../../../docs/rule/doc-spec-rule.md)
- [React 组件规范](../../../../../docs/rule/code-react-component-rule.md)
- [TypeScript 编码规范](../../../../../docs/rule/code-typescript-style-rule.md)

