# 🧾 产品需求文档：报告大纲编辑器 (Free Outline Editor)

## 一、组件名称

报告大纲编辑器 (FreeOutlineEditor)

## 二、背景与目标

在报告生成场景中，用户需要能够高效地编辑和调整报告的层级大纲。当前需要一个能自动管理序号、强制统一格式的编辑器。

本组件旨在提供：

- 一个简洁的、仅支持有序列表层级结构的文本编辑界面。
- 为每一行自动生成固定、不可编辑的层级序号（如 1, 1.1, 2.1.3）。
- 通过缩进控制大纲层级，并自动处理粘贴文本的编号。

## 三、功能需求

### 1. 核心功能

- **初始化内容**：组件能够接收一个特定格式的字符串作为初始大纲内容进行展示。层级由缩进（例如，2个空格）表示。
- **层级编辑**：用户可以通过增加或减少行首的缩进（如使用 `Tab` 和 `Shift+Tab`）来调整大纲的层级。
- **文本编辑**：用户可以自由编辑每行标题的文本内容。
- **自动编号**：组件会根据大纲的层级结构，自动生成并显示不可编辑的序号。
- **粘贴处理**：当用户粘贴带有序号的文本（如 `1. xxx` 或 `a) yyy`）时，组件会自动移除原序号，并应用正确的层级和新序号。
- **数据输出**：组件能将编辑后的大纲内容，以带缩进的纯文本格式输出。

### 2. 数据交互

- **受控组件**：组件应作为受控组件，其内容状态由外部传入的 `value` prop 决定。
- **变更回调**：当编辑器内容发生变化时，通过 `onChange` 回调函数将新的大纲字符串通知父组件。

## 四、交互需求

### 1. 键盘行为

- 支持标准文本编辑器的所有键盘操作。
- `Tab` 键：将当前行或选中行增加一级缩进。
- `Shift+Tab` 键：将当前行或选中行减少一级缩进。
- `Enter` 键：在当前行下方创建一个新的、同层级的大纲条目。

## 五、样式与视觉需求

### 1. 整体外观

- 组件呈现为一个简洁的文本输入区域，左侧展示自动生成的序号，右侧为可编辑的文本区域。
- 序号区域与文本区域在视觉上分离，且序号不可被选中或修改。

## 六、数据行为规范

- **输入**：接收一个字符串 (`string`) 作为 `value`。该字符串通过换行符分隔条目，通过前置空格表示层级。
  - 示例：
    ```
    第一章 总则
      适用范围
    第二章 权利与义务
    ```
- **输出**：通过 `onChange` 回调返回相同格式的字符串。
- **无样式**：组件不保留除有序列表层级之外的任何其他样式（如粗体、斜体等）。

## 七、非功能性需求

- **性能**：即使处理数百行的大纲，也能保持响应流畅。
- **易用性**：组件 API 设计简单，易于在项目中集成和使用。
- **兼容性**：在主流桌面浏览器中表现一致。
