# 项目经历

本目录包含各个项目的详细经历文档。

## 项目概览

### GEL Workspace 前端应用群 | 2024.01 - 至今

企业前端应用集群，服务全球企业数据分析和 AI 报告生成。
**规模**：8 个业务应用 + 11 个共享包，总代码量 28 万+行，日均处理数千份报告。
**核心技术栈**：React 18 + TypeScript 5 + Redux Toolkit + Turborepo 2.5.3 + pnpm + Vite 6.x + Webpack 5

---

## 🏗️ 架构与工程化

### [GEL Workspace Monorepo 工程化建设](./gel-workspace-monorepo.md)

**角色**：项目经理 & 架构师

**Situation**: 面对 8 个独立应用（28 万+行代码）存在的依赖冲突、重复造轮子、构建缓慢（5-8 分钟）等问题，急需统一工程标准。
**Task**: 搭建高性能 Monorepo 架构，统一构建流程与开发规范，提升团队协作效率。
**Action**:

- **架构迁移**：从独立仓迁移至 **Turborepo 2.5 + pnpm Workspace**，通过硬链接机制减少 60% 磁盘占用，统一 `react`/`antd` 等核心依赖版本。
- **构建优化**：配置 **Turbo Pipeline** 实现多应用并行构建与缓存复用（Hash 策略），编写 `run-app.js` 统一开发启动命令。
- **规范建设**：制定 16 项开发规范，集成 ESLint + Prettier + Husky 自动化卡点，拆分 `gel-ui`/`gel-api` 等 11 个共享包。
- **DevOps**：配置 **GitHub Actions** CI/CD 流程，编写 `local-ci.js` 脚本支持本地并行测试与增量构建。
  **Result**:
- **构建提速**：冷启动构建时间从 5-8 分钟降至 1-2 分钟（提速 3-5 倍），缓存命中率稳定在 70-90%。
- **研发效率**：公共代码复用率达 70%，新应用初始化时间从 3 天缩短至 2 小时。
- **部署质量**：自动化部署成功率提升至 99%，代码风格一致性达 95%。

---

## 🚀 核心业务系统

### 1. [Report-AI 智能报告生成平台](./report-ai.md) | 2024.03 - 2024.10

**角色**：项目负责人 & 核心开发（51,314 行代码）

**Situation**: 针对金融咨询行业高频（500+份/日）、长文档（10-50 页）的报告生成需求，需解决 AI 生成与人工编辑的并发冲突及性能瓶颈。
**Task**: 设计高一致性的文档协作引擎，实现流式 AI 内容注入与高性能文档编辑。
**Action**:

- **状态管理**：设计 **Canonical/Draft/UI 三层状态机**，采用 **Single-Flight** 机制串行化保存请求，确保多源数据最终一致性。
- **变更检测**：实现 **文档级哈希算法**（SHA-256），在 <10ms 内精准识别文档变更，仅对增量内容进行网络传输。
- **AI 集成**：基于 **Hydration 注水机制** 将 AI 流式数据注入 Draft 层，通过 **AbortController** 实现生成中断与现场恢复。
- **性能优化**：采用 **虚拟化渲染** 优化长文档编辑，通过 `requestAnimationFrame` 调度 DOM 更新。
  **Result**:
- **性能突破**：50+ 页文档编辑流畅度提升 70%，保存成功率达 99.5%。
- **业务效能**：AI 生成 10 页报告仅需 2-3 分钟，整体撰写效率提升 80%。
- **系统容量**：单实例稳定支持 100+ 并发用户，日均处理 500+ 份报告。

### 2. [Report Print 分布式 PDF 生成服务](./report-print.md) | 2024.05 - 2024.09

**角色**：核心开发（8,460 行代码）

**Situation**: 需支持 30+ 种企业类型、中英双语、多环境的 PDF 批量导出，且必须兼容基于 QT Webkit 的渲染引擎（wkhtmltopdf）。
**Task**: 解决复杂表格跨页截断问题，实现高并发批量导出与遗留系统兼容。
**Action**:

- **算法攻坚**：研发 **HTML 感知分页算法**（O(n×m)），动态计算 DOM 高度并智能拆分单元格，确保跨页内容不丢失语义结构。
- **兼容降级**：配置 **Babel/Webpack** 将 React 18/Vite 代码转译为 ES5，通过 Polyfill 适配旧版渲染引擎。
- **批量调度**：实现基于队列的 **多维并行导出**（企业 × 语言 × 环境），支持 180 种组合任务的错误隔离与重试。
- **配置驱动**：设计 JSON Schema 驱动的渲染引擎，通过配置即可生成不同企业类型的报告模板。
  **Result**:
- **质量飞跃**：复杂表格跨页格式错误率从 15% 降至 <1%，实现像素级还原。
- **效率提升**：批量导出速度提升 10 倍（180 份 <15 分钟），新模板开发周期从 2 天压缩至 2 小时。

---

## 🤝 深度参与项目

### 3. [Company 全球企业图谱平台](./company.md) | 2023.10 - 2024.06

**角色**：核心开发者（贡献 ~3 万行代码）

**Situation**: 聚合全球 200+ 国家企业数据，需支持 10 万+ 次/日的复杂关系查询与可视化交互。
**Task**: 开发高性能图谱可视化模块与流畅的列表交互体验。
**Action**:

- **可视化渲染**：集成 **Cytoscape.js** 开发企业关系图谱，通过增量渲染与布局算法优化，实现 1000+ 节点 60fps 流畅交互。
- **性能优化**：使用 **@tanstack/react-virtual** 重构长列表与聊天窗口，将首屏 DOM 节点从 8000+ 降至 2000+。
- **架构设计**：设计响应式布局（LayoutHeader + Left + Right）与动态菜单系统，基于 Redux 管理 50+ 数据模块的加载状态。
- **资源优化**：通过 **React.lazy** + **Webpack Code Splitting** 实现组件级按需加载，首屏 JS 体积减少 65%。
  **Result**:
- **体验升级**：首屏渲染时间（FCP）从 4.5s 优化至 1.8s，长列表滚动帧率稳定在 60fps。
- **功能覆盖**：成功上线 IPO 股东核查、关联方图谱等 5 个核心图谱功能。

### 4. [AI-Chat 智能对话助手](./ai-chat.md) | 2023.08 - 2024.03

**角色**：核心开发者（贡献 ~2 万行代码）

**Situation**: 企业级 AI 助手，需处理多轮对话、实时流式响应及复杂表格数据的即时分析。
**Task**: 实现稳定的流式对话体验与复杂数据类型的渲染。
**Action**:

- **流式处理**：封装 **SSE (Server-Sent Events)** 请求库，结合 **Fetch API** 实现打字机效果，首字节响应 <2s。
- **异步任务**：设计 **Task Polling** (`useSheetTask`) 机制处理长耗时表格分析任务，实现"处理中-完成"的状态平滑流转。
- **组件架构**：构建 **VisTable** 与 **VirtualBubbleList** 组件，支持 markdown、图表、表格等多种消息类型的混合渲染。
- **稳定性**：集成 **Sentry** 监控与 **ErrorBoundary** 降级策略，确保解析失败时自动回退至纯文本展示。
  **Result**:
- **交互优化**：流式响应延迟 <500ms，用户满意度提升 35%。
- **性能指标**：支持 1000+ 轮次长对话上下文，表格渲染性能从 15fps 提升至 60fps。
