# Company 全球企业信息平台 | 2023.10 - 2024.06

**角色**：核心开发者（开发约 3 万行代码）

**项目背景**：全球企业信息查询平台，覆盖 200+国家/地区企业数据，日均查询 10 万+次，服务投资分析师、风控专员等专业用户。

**技术栈**：React 18 + TypeScript + Redux + Webpack 5 + Ant Design + Cytoscape.js

## 职责与成果

### 企业详情页架构设计与实现

**响应式布局系统**

- 设计上左右三区域布局架构（LayoutHeader + Left + Right），通过 Flexbox 实现自适应布局
- 实现 AI 面板的动态显示/隐藏控制，支持宽度在 25%/50%之间切换，通过 CSS transition 实现平滑过渡动画
- 开发响应式适配策略：大屏（>1200px）默认显示 AI 面板，中屏（768-1200px）紧凑布局，小屏（<768px）单栏模式
- 通过 Redux 统一管理布局状态（showRight、rightWidth），实现跨组件的状态同步和持久化

**动态菜单系统**

- 开发基于企业类型的菜单配置引擎，根据 corpCategory 和 corpTypeId 动态生成菜单结构
- 实现 10+种企业类型的差异化配置：普通企业（标准模块）、私募基金（私募专用模块）、公募基金（公募专用模块）、IPO 企业（IPO 业务模块）
- 构建菜单与数据模块的联动机制：通过 basicNum 统计数据过滤无数据模块，菜单项实时显示数据数量
- 实现菜单搜索功能，支持模糊匹配和拼音搜索，搜索响应时间<100ms

**懒加载与性能优化**

- 实现基于 IntersectionObserver 的滚动监听，通过 300ms 防抖避免频繁计算，CPU 占用降低 60%
- 开发智能预加载策略：根据屏幕高度和滚动位置动态计算预加载数量（1-3 个模块），平衡性能和体验
- 构建模块加载队列管理（scrollModuleIds），避免重复加载，通过 Redux 缓存已加载模块状态
- 实现菜单高亮与内容区的双向同步：滚动时自动更新菜单选中状态，点击菜单时平滑滚动到对应模块
- 通过懒加载机制将首屏渲染时间从 4.5s 降至 1.8s，首屏 DOM 节点数从 8000+降至 2000+

**模块化配置系统**

- 构建 50+数据模块的配置化架构，按业务分类：基础信息（base）、财务数据（finance）、业务信息（buss）、知识产权（ip）、司法风险（risk）、经营风险（bussRisk）、历史数据（history）
- 实现模块的统一渲染引擎（CompanyBase），支持普通模块、子模块、多标签模块三种类型
- 开发权限控制系统：通过用户角色和 VIP 等级控制模块可见性，支持 20+种权限组合
- 实现模块的按需加载和卸载，通过 React.lazy 和动态 import 将代码分割到独立 chunk，减少初始加载体积 65%

### AI 智能对话功能

- 开发 ChatMessageCore 核心组件，集成企业上下文（企业名称、类型、统计数据），支持 1000+消息/会话的上下文管理
- 接入 SSE 流式接口，实现 AI 回复的实时渲染，首字节响应<2s，流式延迟<500ms
- 实现虚拟滚动对话列表（VirtualBubbleList），支持 500+条消息的流畅滚动（60fps），内存占用降低 70%
- 开发预设问题生成器，根据企业类型动态生成 5-8 个智能推荐问题，问题点击率达 45%

### 企业关系图谱可视化

- 开发 IPO 股东核查、关联方图谱、股权路径查询等 5 个图谱功能，支持 5 层关系追溯和路径高亮
- 使用 Cytoscape.js 渲染复杂关系网络，通过布局算法优化和增量渲染，支持 1000+节点的流畅交互（60fps）
- 实现缩放、拖拽、节点筛选、关系过滤等交互功能，通过快捷键和工具栏提升操作效率 40%
- 集成图谱导出功能（PNG/SVG），支持自定义样式和水印，导出成功率 99%

### 数据展示与导出优化

- 使用 react-window 实现虚拟滚动表格，支持 10 万+行数据的流畅渲染，滚动帧率稳定在 60fps
- 集成 xlsx.js 实现 Excel 导出，通过 Web Worker 异步处理，支持 10 万+行数据导出，导出时间从 45s 降至 8s
- 实现基于用户角色的字段权限控制，通过配置化方案支持 20+种权限组合，保障数据安全
- 开发数据预处理管道，通过格式化、脱敏、翻译等处理，提升导出数据质量和可读性

### 性能优化与工程化

- 通过代码分割和动态导入，将首屏 JS 包体积从 2.8MB 降至 850KB，首屏加载时间缩短 60%
- 实现组件级懒加载和按需渲染，通过 React.lazy 和 Suspense 将页面内存占用降低 45%
- 配置 Webpack 构建优化（Tree Shaking、压缩、缓存），构建时间从 180s 降至 65s
- 接入 Sentry 错误监控，捕获并上报前端异常，错误覆盖率达 95%，平均响应时间<2h
