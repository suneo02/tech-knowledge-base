---
description: 处理接口文档的规范
globs: 
alwaysApply: false
---
# API 接口文档规则

## 文件位置

- 所有 API 接口文档必须创建在 `文档管理/接口文档/` 目录下

## 文件命名

- 使用模块名称作为文件名
- 格式：`模块名称_api.md`
- 示例：`user_api.md`、`order_api.md`

## 文档结构

API 接口文档必须包含以下主要部分：

### 1. 文档标题

```markdown
# 模块名称接口文档
```

- 使用一级标题（#）
- 标题格式为：`模块名称接口文档`

### 2. 接口概述

```markdown
## 接口概述

- 版本：v1.0.0
- 更新时间：YYYY-MM-DD
- 负责人：XXX
```

- 必须包含版本号、更新时间和负责人信息

### 3. 接口列表

每个接口必须使用二级标题（##）标识，并按照以下格式编写：

````markdown
## N. 接口名称

### 接口描述

简要描述接口的功能和用途

### 请求方式

- **HTTP 方法**: GET/POST/PUT/DELETE
- **接口路径**: `/api/path/to/resource`

### 请求参数

#### 路径参数（如有）

| 参数名 | 类型   | 必填 | 描述    |
| ------ | ------ | ---- | ------- |
| id     | string | 是   | 资源 ID |

#### 查询参数（如有）

| 参数名   | 类型    | 必填 | 描述                  |
| -------- | ------- | ---- | --------------------- |
| page     | integer | 否   | 页码，默认为 1        |
| pageSize | integer | 否   | 每页记录数，默认为 10 |

#### 请求体（如有）

| 参数名      | 类型   | 必填 | 描述 |
| ----------- | ------ | ---- | ---- |
| name        | string | 是   | 名称 |
| description | string | 否   | 描述 |

### 响应参数

| 参数名  | 类型    | 描述                 |
| ------- | ------- | -------------------- |
| code    | integer | 状态码，200 表示成功 |
| message | string  | 响应信息             |
| data    | object  | 响应数据             |

### 响应示例

```json
{
  "code": 200,
  "message": "成功",
  "data": {
    // 响应数据结构
  }
}
```
````

````

### 4. 数据结构说明
如果接口涉及复杂的数据结构，必须单独列出详细说明：

```markdown
## 数据结构说明

### 结构名称
| 字段名      | 类型    | 描述                 |
| ----------- | ------- | -------------------- |
| id          | string  | 唯一标识符           |
| name        | string  | 名称                 |
| createTime  | string  | 创建时间             |
````

### 5. 错误码说明

```markdown
## 错误码说明

| 错误码 | 描述           |
| ------ | -------------- |
| 200    | 成功           |
| 400    | 请求参数错误   |
| 401    | 未授权         |
| 403    | 权限不足       |
| 404    | 资源不存在     |
| 500    | 服务器内部错误 |
```

## 格式规范

### 1. 标题层级

- 一级标题（#）：文档标题
- 二级标题（##）：主要章节或接口名称
- 三级标题（###）：接口详情部分
- 四级标题（####）：参数分类

### 2. 表格格式

- 表格必须包含表头
- 列名必须使用中文
- 必须包含参数名、类型、必填（如适用）和描述列
- 表格前后必须有空行

### 3. 代码块

- 使用```json 标识 JSON 代码块
- JSON 示例必须格式化，保持良好的缩进
- 示例数据应该尽量真实，避免使用占位符

### 4. 参数说明

- 参数类型必须使用英文：string、integer、boolean、array、object 等
- 必填参数必须标注为"是"，非必填参数标注为"否"
- 参数描述应简洁明了，必要时说明默认值、取值范围等

### 5. 接口路径

- 使用小写字母和连字符（-）
- 遵循 RESTful 设计原则
- 版本号应包含在路径中，如`/api/v1/resource`

## 特殊接口类型规范

### 1. 分页接口

分页接口的响应必须包含以下字段：

```markdown
| 参数名 | 类型    | 描述       |
| ------ | ------- | ---------- |
| total  | integer | 总记录数   |
| pages  | integer | 总页数     |
| page   | integer | 当前页码   |
| size   | integer | 每页记录数 |
| list   | array   | 数据列表   |
```

### 2. 文件上传接口

文件上传接口必须说明：

```markdown
- 支持的文件类型
- 文件大小限制
- 上传方式（formData、base64 等）
- 是否支持多文件上传
```

### 3. 导出接口

导出接口必须说明：

```markdown
- 导出文件格式
- 导出方式（同步/异步）
- 文件命名规则
- 导出字段说明
```

### 4. 多类型数据接口

如果接口返回多种类型的数据（如 AIGC 历史会话接口），必须：

```markdown
1. 说明类型字段名称及可能的值
2. 针对每种类型，列出特有的字段
3. 提供不同类型的响应示例
```

## 文档维护

### 1. 版本控制

- 每次接口变更必须更新版本号
- 版本号格式：主版本.次版本.修订版本
- 接口变更记录必须在文档开头注明

### 2. 接口状态标记

必要时使用状态标记：

```markdown
- [NEW] - 新增接口
- [UPDATED] - 更新接口
- [DEPRECATED] - 即将废弃
- [REMOVED] - 已移除（保留文档但标记为已移除）
```

### 3. 变更记录

在文档末尾维护变更记录：

```markdown
## 变更记录

| 版本   | 日期       | 变更人 | 变更内容         |
| ------ | ---------- | ------ | ---------------- |
| v1.0.0 | 2023-05-20 | 张三   | 初始版本         |
| v1.1.0 | 2023-06-15 | 李四   | 新增用户查询接口 |
```

## 示例模板

````markdown
# 用户管理接口文档

## 接口概述

- 版本：v1.0.0
- 更新时间：2023-05-20
- 负责人：张三

## 1. 用户登录

### 接口描述

用户登录接口，验证用户身份并返回访问令牌

### 请求方式

- **HTTP 方法**: POST
- **接口路径**: `/api/v1/users/login`

### 请求参数

#### 请求体

| 参数名   | 类型    | 必填 | 描述     |
| -------- | ------- | ---- | -------- |
| username | string  | 是   | 用户名   |
| password | string  | 是   | 密码     |
| remember | boolean | 否   | 记住登录 |

### 响应参数

| 参数名   | 类型    | 描述                 |
| -------- | ------- | -------------------- |
| code     | integer | 状态码，200 表示成功 |
| message  | string  | 响应信息             |
| data     | object  | 响应数据             |
| ├─ token | string  | 访问令牌             |
| ├─ user  | object  | 用户信息             |

### 响应示例

```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": "1001",
      "username": "zhangsan",
      "nickname": "张三",
      "avatar": "https://example.com/avatar/1001.jpg",
      "role": "admin"
    }
  }
}
```
````

## 错误码说明

| 错误码 | 描述           |
| ------ | -------------- |
| 200    | 成功           |
| 400    | 请求参数错误   |
| 401    | 未授权         |
| 403    | 权限不足       |
| 404    | 资源不存在     |
| 500    | 服务器内部错误 |

## 变更记录

| 版本   | 日期       | 变更人 | 变更内容 |
| ------ | ---------- | ------ | -------- |
| v1.0.0 | 2023-05-20 | 张三   | 初始版本 |

```

```
