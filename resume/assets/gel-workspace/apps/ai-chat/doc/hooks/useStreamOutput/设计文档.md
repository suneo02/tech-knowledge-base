# useStreamOutput Hook

## 概述
`useStreamOutput` 是一个自定义 Hook，用于处理 AI 聊天应用中的流式输出逻辑。它封装了与 AI 服务的流式通信，处理消息的实时更新和状态管理。

## 详细功能说明
Hook 实现了以下核心功能：
1. 配置和初始化 AI 服务连接
2. 处理流式请求的发送和接收
3. 管理消息内容的累积和更新
4. 提供错误处理机制
5. 支持消息完成回调

## 参数说明
Hook 不接收任何参数，但其返回的 `handleStreamRequest` 函数接收以下参数：

### handleStreamRequest 参数
1. info: StreamInfo
   - messages?: LLMServiceMessage[] - 消息历史列表
   - message?: LLMServiceMessage - 当前发送的消息

2. callbacks: StreamCallbacks
   - onUpdate: (message: LLMServiceMessage) => void - 消息更新回调
   - onSuccess: (message: LLMServiceMessage) => void - 消息完成回调

## 返回值说明
返回一个对象，包含以下方法：
- `handleStreamRequest: (info: StreamInfo, callbacks: StreamCallbacks) => Promise<void>` - 处理流式请求的主函数

## 使用示例
```typescript
const ChatComponent: React.FC = () => {
  const { handleStreamRequest } = useStreamOutput()

  const [agent] = useXAgent<LLMServiceMessage>({
    request: handleStreamRequest,
  })

  // 在组件中使用 agent 处理消息
  const onSendMessage = (content: string) => {
    agent.request({
      message: { role: 'user', content },
    })
  }

  return (
    <div>
      {/* 聊天界面组件 */}
    </div>
  )
} 