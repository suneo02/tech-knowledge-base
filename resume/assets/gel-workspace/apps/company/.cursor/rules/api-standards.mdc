---
description: API integration and type definition standards for the project
globs: **/api/**/*.ts
---

## API 实现规范
- 使用项目封装的 request 函数进行 API 调用
- API 路径必须在 src/api/paths/ 下定义
- 具体的接口类型定义必须放在 src/api/ 对应模块目录下
- 所有新增的 API 路径类型必须合并到 src/api/paths/index.ts 中的 ApiPaths 类型中

## 目录结构规范
```

src/api/
  ├── paths/           # 仅用于API路径定义
  │   ├── corp/       # 企业相关路径
  │   ├── user/       # 用户相关路径
  │   └── ...
  ├── corp/           # 企业模块相关类型
  │   ├── buss/       # 业务相关类型
  │   └── types.ts    
  ├── user/           # 用户模块相关类型
  │   └── types.ts
  ├── types.ts        # 基础类型定义和API路径合并
  └── request.ts      # 请求工具
```

## 类型定义规范

1. API 路径定义 (在 src/api/paths/ 下):
```

// src/api/paths/corp/example.ts
export type CorpExampleApiPaths = {
  'corp/getData': {
    params: PaginationBaseParams
    response: ApiResponse<ICorpDataResponse[]>
  }
}
```

2. API 路径类型合并 (在 src/api/types.ts 中):
```

// src/api/types.ts
export type ApiPaths = 
  & CorpBussApiPaths 
  & CorpExampleApiPaths 
  & UserApiPaths
  // ... 其他模块的 API 路径
```

3. 响应类型定义 (在 src/api/ 对应模块下):
```

// src/api/corp/types.ts
export interface ICorpDataResponse {
  id: string
  name: string
  // ... 其他字段
}
```

## 添加新 API 的完整步骤:

1. 在 paths/ 中定义 API 路径类型:
```

// src/api/paths/corp/example.ts
export type CorpExampleApiPaths = {
  'corp/getData': {
    params: PaginationBaseParams
    response: ApiResponse<ICorpDataResponse[]>
  }
}
```

2. 在对应模块目录下定义响应类型:
```

// src/api/corp/types.ts
export interface ICorpDataResponse {
  id: string
  name: string
}
```

3. 将新的 API 路径类型合并到 ApiPaths:
```

// src/api/paths/index.ts
export type ApiPaths = 
  & CorpBussApiPaths 
  & CorpExampleApiPaths  // 添加新的路径类型
  & UserApiPaths
```

4. 使用 API:
```

import { request } from '@/api/request'

const getData = async () => {
  const response = await request('corp/getData', {
    params: {
      pageIndex: 1,
      pageSize: 10
    }
  })
}
```

## 注意事项
- paths/ 目录仅用于定义 API 路径和参数类型
- 具体的接口返回类型定义应放在对应的模块目录下
- 新增的每个 API 路径类型必须合并到 ApiPaths 中
- 确保 ApiPaths 类型完整性，这关系到类型推导和请求函数的类型安全
- 复用已有的基础类型 (PaginationBaseParams, QueryParams 等)

## 类型检查
- 使用 ApiPath 类型来确保路径字符串的类型安全
- 使用 GetApiParams 和 GetApiResponse 获取参数和响应类型
- request 函数会根据 ApiPaths 自动推导参数和响应类型

@file src/api/types.ts
@file src/api/paths/index.ts
@file src/api/request.ts