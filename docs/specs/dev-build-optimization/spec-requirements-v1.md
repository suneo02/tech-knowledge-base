---
title: å¼€å‘ç¯å¢ƒä¾èµ–åŒ…æ„å»ºä¼˜åŒ– - éœ€æ±‚åˆ†æ
version: v1
status: ğŸš§ è¿›è¡Œä¸­
---

[â† è¿”å›ä»»åŠ¡æ¦‚è§ˆ](/docs/specs/dev-build-optimization/README.md)

# å¼€å‘ç¯å¢ƒä¾èµ–åŒ…æ„å»ºä¼˜åŒ– - éœ€æ±‚åˆ†æ v1

## 1. èƒŒæ™¯ä¸ä¸Šä¸‹æ–‡

### 1.1 å½“å‰æ¶æ„

é¡¹ç›®é‡‡ç”¨ pnpm + turbo çš„ monorepo æ¶æ„ï¼š

- **Apps**ï¼šreport-aiã€ai-chatã€company ç­‰åº”ç”¨
- **Packages**ï¼šgel-uiã€gel-apiã€gel-util ç­‰å…±äº«ä¾èµ–åŒ…
- **æ„å»ºå·¥å…·**ï¼šVite + Rollup

### 1.2 ç°å­˜é—®é¢˜

| é—®é¢˜ç±»å‹   | å…·ä½“è¡¨ç°                                  | å½±å“                   |
| ---------- | ----------------------------------------- | ---------------------- |
| ä»£ç å¯è¯»æ€§ | packages æ„å»ºåä»£ç è¢«å‹ç¼©ã€å˜é‡åè¢«é‡å‘½å | è°ƒè¯•å›°éš¾ï¼Œæ— æ³•è¿½è¸ªé—®é¢˜ |
| æ„å»ºæ€§èƒ½   | åŒæ—¶ dev packages å’Œ apps é€Ÿåº¦æ…¢          | å¼€å‘ä½“éªŒå·®             |
| æ—¶åºé—®é¢˜   | packages æœªæ„å»ºå®Œæˆæ—¶ apps å·²å¯åŠ¨å¯¼è‡´æŠ¥é”™ | éœ€è¦æ‰‹åŠ¨é‡å¯           |
| å¼€å‘æ•ˆç‡   | æ¯æ¬¡ä¿®æ”¹ packages éœ€è¦ç­‰å¾…å®Œæ•´æ„å»º        | çƒ­æ›´æ–°ä½“éªŒå·®           |

### 1.3 æŠ€æœ¯çº¦æŸ

- å¿…é¡»ä¿æŒ turbo çš„ä¾èµ–æ‹“æ‰‘å…³ç³»ï¼ˆ`dependsOn: ["^build"]`ï¼‰
- packages éœ€è¦è¾“å‡ºæ ‡å‡†çš„ npm åŒ…æ ¼å¼ï¼ˆæ”¯æŒå¤–éƒ¨å¼•ç”¨ï¼‰
- ä¸èƒ½å½±å“ç”Ÿäº§ç¯å¢ƒæ„å»ºäº§ç‰©

## 2. éœ€æ±‚æç‚¼

### 2.1 æ ¸å¿ƒéœ€æ±‚

| éœ€æ±‚ç¼–å· | éœ€æ±‚æè¿°                                 | ä¼˜å…ˆçº§ |
| -------- | ---------------------------------------- | ------ |
| R1       | å¼€å‘ç¯å¢ƒ packages æ„å»ºäº§ç‰©ä¸å‹ç¼©ã€ä¸æ··æ·† | P0     |
| R2       | ä¿ç•™åŸå§‹å˜é‡åã€å‡½æ•°åã€ç±»å             | P0     |
| R3       | ç”Ÿæˆ sourcemap ä¾¿äºè°ƒè¯•                  | P0     |
| R4       | ä¿æŒæ¨¡å—ç»“æ„ï¼ˆpreserveModulesï¼‰          | P1     |
| R5       | æ„å»ºé€Ÿåº¦ä¼˜åŒ–ï¼ˆé¿å…ä¸å¿…è¦çš„è½¬æ¢ï¼‰         | P1     |
| R6       | ç”Ÿäº§ç¯å¢ƒä¿æŒå‹ç¼©ä¼˜åŒ–                     | P0     |
| R7       | æ”¯æŒ dev:debug æ¨¡å¼ï¼ˆbuild ä¸ watchï¼‰    | P0     |

### 2.2 éåŠŸèƒ½éœ€æ±‚

- æ„å»ºé…ç½®æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
- æ”¯æŒ watch æ¨¡å¼ä¸‹çš„å¢é‡æ„å»º
- ä¸å½±å“ç±»å‹å®šä¹‰ç”Ÿæˆ

## 3. å¼€å‘æ¨¡å¼éœ€æ±‚

### 3.1 æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼          | é€‚ç”¨åœºæ™¯                  | packages è¡Œä¸º                 | apps è¡Œä¸º |
| ------------- | ------------------------- | ----------------------------- | --------- |
| **dev**       | åªå¼€å‘ appï¼Œä¸æ”¹ packages | build productionï¼ˆä¸€æ¬¡æ€§ï¼‰    | dev watch |
| **dev:debug** | è°ƒè¯• packages ä»£ç         | build developmentï¼ˆä¸€æ¬¡æ€§ï¼‰   | dev watch |
| **å®Œæ•´æ¨¡å¼**  | éœ€è¦åŒæ—¶ä¿®æ”¹ packages     | dev watchï¼ˆdevelopment æ¨¡å¼ï¼‰ | dev watch |

### 3.2 dev:debug æ¨¡å¼éœ€æ±‚

- packages ä½¿ç”¨ development æ¨¡å¼æ„å»ºï¼ˆä¸å‹ç¼©ã€ä¿ç•™å˜é‡åã€ç”Ÿæˆ sourcemapï¼‰
- packages æ„å»ºå®Œæˆåä¸ watchï¼Œé¿å…æ€§èƒ½å¼€é”€
- apps æ­£å¸¸å¯åŠ¨ dev æ¨¡å¼
- ä¿æŒ turbo ä¾èµ–é¡ºåºï¼ˆ`dependsOn: ["^build"]`ï¼‰

## 4. æ›´æ–°è®°å½•

| æ—¥æœŸ       | ä¿®æ”¹äºº | æ›´æ–°å†…å®¹                   |
| ---------- | ------ | -------------------------- |
| 2025-11-20 | -      | ä»æ ¸å¿ƒæ–¹æ¡ˆæ‹†åˆ†éœ€æ±‚åˆ†ææ–‡æ¡£ |
| 2025-11-20 | -      | æ–°å¢ dev:debug æ¨¡å¼éœ€æ±‚    |

## ç›¸å…³æ–‡æ¡£

- [æ–¹æ¡ˆè®¾è®¡ v1](/docs/specs/dev-build-optimization/spec-design-v1.md)
- [å®æ–½è®¡åˆ’ v1](/docs/specs/dev-build-optimization/spec-implementation-v1.md)
